# MovieMate Backend Environment Variables
# Copy this file to .env and fill in your actual values

# ============================================
# DATABASE CONFIGURATION
# ============================================
# PostgreSQL connection string
# Format: postgresql://username:password@host:port/database_name
DATABASE_URL=postgresql://user:password@localhost:5432/moviemate

# Database Connection Pool Settings (for optimization)
DB_POOL_SIZE=5          # Number of connections to maintain in the pool
DB_MAX_OVERFLOW=10      # Maximum overflow connections beyond pool_size
DB_POOL_TIMEOUT=30      # Seconds to wait for an available connection
DB_POOL_RECYCLE=3600    # Recycle connections after this many seconds (1 hour)
DB_ECHO=false           # Set to true to log all SQL queries (for debugging only)

# ============================================
# JWT AUTHENTICATION
# ============================================
# Secret key for JWT token signing (generate with: openssl rand -hex 32)
JWT_SECRET_KEY=your-super-secret-jwt-key-change-this-in-production

# JWT algorithm (HS256 is standard)
JWT_ALGORITHM=HS256

# Token expiration times (in minutes)
ACCESS_TOKEN_EXPIRE_MINUTES=30
REFRESH_TOKEN_EXPIRE_MINUTES=10080  # 7 days

# ============================================
# TMDB API CONFIGURATION
# ============================================
# Get your API key from: https://www.themoviedb.org/settings/api
TMDB_API_KEY=your-tmdb-api-key-here

# TMDB API base URL (usually doesn't need to change)
TMDB_BASE_URL=https://api.themoviedb.org/3

# ============================================
# BACKGROUND JOBS
# ============================================
# Enable/disable background jobs
ENABLE_BACKGROUND_JOBS=true

# Timezone for scheduled jobs (e.g., UTC, America/New_York, Asia/Ho_Chi_Minh)
TIMEZONE=UTC

# ============================================
# CACHING CONFIGURATION
# ============================================
# In-memory cache max size (number of items)
CACHE_MAX_SIZE=1000

# Cache TTL defaults (in seconds)
CACHE_TTL_GENRES=86400      # 24 hours (genres rarely change)
CACHE_TTL_TRENDING=3600     # 1 hour
CACHE_TTL_POPULAR=3600      # 1 hour
CACHE_TTL_SEARCH=300        # 5 minutes
CACHE_TTL_MOVIE_DETAILS=600 # 10 minutes

# Redis configuration (optional, for production with multiple workers)
# REDIS_HOST=localhost
# REDIS_PORT=6379
# REDIS_PASSWORD=
# REDIS_DB=0

# ============================================
# SECURITY SETTINGS
# ============================================
# CORS allowed origins (comma-separated)
CORS_ORIGINS=http://localhost:3000,http://localhost:5173,https://your-frontend-domain.com

# Rate limiting (requests per minute)
RATE_LIMIT_PER_MINUTE=60

# Password requirements
PASSWORD_MIN_LENGTH=8
PASSWORD_REQUIRE_UPPERCASE=true
PASSWORD_REQUIRE_LOWERCASE=true
PASSWORD_REQUIRE_DIGIT=true
PASSWORD_REQUIRE_SPECIAL=false

# ============================================
# APPLICATION SETTINGS
# ============================================
# Application environment (development, staging, production)
ENVIRONMENT=development

# API version
API_VERSION=v1

# Debug mode (true for development, false for production)
DEBUG=true

# Log level (DEBUG, INFO, WARNING, ERROR, CRITICAL)
LOG_LEVEL=INFO

# Maximum page size for pagination
MAX_PAGE_SIZE=100

# ============================================
# EMAIL CONFIGURATION (Optional)
# ============================================
# For password reset, notifications, etc.
# SMTP_HOST=smtp.gmail.com
# SMTP_PORT=587
# SMTP_USER=your-email@gmail.com
# SMTP_PASSWORD=your-app-password
# SMTP_FROM=noreply@moviemate.com

# ============================================
# DEPLOYMENT SETTINGS
# ============================================
# Backend URL (for CORS, email links, etc.)
BACKEND_URL=http://localhost:8000

# Frontend URL (for redirects, email links)
FRONTEND_URL=http://localhost:5173

# Sentry DSN for error tracking (optional)
# SENTRY_DSN=https://xxx@xxx.ingest.sentry.io/xxx

# ============================================
# DEVELOPMENT TOOLS
# ============================================
# Auto-reload on code changes (uvicorn --reload)
RELOAD=true

# Profiling enabled
ENABLE_PROFILING=false

# ============================================
# NOTES
# ============================================
# 1. Never commit .env file to git (it's in .gitignore)
# 2. Generate strong JWT_SECRET_KEY: openssl rand -hex 32
# 3. For production, set DEBUG=false and LOG_LEVEL=WARNING
# 4. Adjust DB_POOL_SIZE based on your server capacity
# 5. Update CORS_ORIGINS with your actual frontend domains
